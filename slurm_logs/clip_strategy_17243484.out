============================================================
CLIP Strategy Comparison
Job ID: 17243484
Node: g027
GPUs: 2x A100
CPUs: 48
Memory: 256GB
Started: Tue Dec  2 14:11:19 CST 2025
============================================================
[14:11:19] Loading modules...
[14:11:24] Activating virtual environment...
[14:11:24] Environment ready

Using Nvidia CUDA backend.
[14:16:55] Starting CLIP Strategy Comparison
[14:16:55] ============================================================
Using Nvidia CUDA backend.
[14:16:55] Device: cuda
[14:16:55] Loading BCSS dataset...
[14:16:55] Loaded 45 samples
[14:16:55] Loading CLIPClassifierV2...
Loading CLIP model from: /scratch/user/shubhammhaske/clip_model
CLIPClassifierV2 initialized on device: cuda
[14:17:07] CLIP loaded!
[14:17:07] 
============================================================
[14:17:07] EXPERIMENT 1: Comparing Crop Strategies (no overlay)
[14:17:07] ============================================================
[14:17:07] 
Testing: tight crop
[14:19:41]   Accuracy: 26.11%
[14:19:41] 
Testing: context crop
[14:21:41]   Accuracy: 25.00%
[14:21:41] 
Testing: square crop
[14:23:15]   Accuracy: 22.78%
[14:23:15] 
============================================================
[14:23:15] EXPERIMENT 2: Comparing Overlay Strategies (tight crop)
[14:23:15] ============================================================
[14:23:15] 
Testing: none overlay
[14:25:15]   Accuracy: 26.11%
[14:25:15] 
Testing: blur overlay
[14:28:37]   Accuracy: 31.11%
[14:28:37] 
Testing: dim overlay
[14:31:31]   Accuracy: 32.22%
[14:31:31] 
Testing: masked overlay
[14:34:01]   Accuracy: 43.89%
[14:34:01] 
============================================================
[14:34:01] EXPERIMENT 3: Testing Best Combinations
[14:34:01] ============================================================
[14:34:01] 
Testing: context + blur
[14:37:42]   Accuracy: 33.33%
[14:37:42] 
Testing: context + dim
[14:40:53]   Accuracy: 33.89%
[14:40:53] 
Testing: tight + blur
[14:44:13]   Accuracy: 31.11%
[14:44:13] 
Testing: square + none
[14:45:48]   Accuracy: 22.78%
[14:45:48] 
============================================================
[14:45:48] EXPERIMENT 4: Multi-Crop Ensemble
[14:45:48] ============================================================
[14:45:48] 
Testing: Ensemble (tight + context)
[14:48:33]   Accuracy: 25.00%
[14:48:33] 
======================================================================
[14:48:33] RESULTS SUMMARY
[14:48:33] ======================================================================
[14:48:33] 
Strategy                              Accuracy   Confidence
[14:48:33] ------------------------------------------------------------
[14:48:33] overlay_masked                         43.89%       0.128
[14:48:33] combo_context_dim                      33.89%       0.133
[14:48:33] combo_context_blur                     33.33%       0.135
[14:48:33] overlay_dim                            32.22%       0.136
[14:48:33] overlay_blur                           31.11%       0.135
[14:48:33] combo_tight_blur                       31.11%       0.135
[14:48:33] crop_tight                             26.11%       0.145
[14:48:33] overlay_none                           26.11%       0.145
[14:48:33] crop_context                           25.00%       0.146
[14:48:33] ensemble_tight_context                 25.00%       0.145
[14:48:33] crop_square                            22.78%       0.139
[14:48:33] combo_square_none                      22.78%       0.139
[14:48:33] 
======================================================================
[14:48:33] PER-CLASS BREAKDOWN (Top 3 Strategies)
[14:48:33] ======================================================================
[14:48:33] 
overlay_masked:
[14:48:33]   Class             Accuracy    Correct    Total
[14:48:33]   ---------------------------------------------
[14:48:33]   tumor              80.00%         36       45
[14:48:33]   stroma             64.44%         29       45
[14:48:33]   lymphocyte          5.41%          2       37
[14:48:33]   necrosis           13.04%          3       23
[14:48:33]   blood_vessel       30.00%          9       30
[14:48:33] 
combo_context_dim:
[14:48:33]   Class             Accuracy    Correct    Total
[14:48:33]   ---------------------------------------------
[14:48:33]   tumor              95.56%         43       45
[14:48:33]   stroma             35.56%         16       45
[14:48:33]   lymphocyte          0.00%          0       37
[14:48:33]   necrosis            8.70%          2       23
[14:48:33]   blood_vessel        0.00%          0       30
[14:48:33] 
combo_context_blur:
[14:48:33]   Class             Accuracy    Correct    Total
[14:48:33]   ---------------------------------------------
[14:48:33]   tumor              40.00%         18       45
[14:48:33]   stroma             91.11%         41       45
[14:48:33]   lymphocyte          0.00%          0       37
[14:48:33]   necrosis            0.00%          0       23
[14:48:33]   blood_vessel        3.33%          1       30
[14:48:33] 
Results saved to: results/clip_strategy_comparison/strategy_comparison.json
[14:48:33] 
======================================================================
[14:48:33] RECOMMENDATION: Use 'overlay_masked' strategy
[14:48:33]   Overall Accuracy: 43.89%
[14:48:33] ======================================================================

============================================================
Completed: Tue Dec  2 14:49:01 CST 2025
============================================================
