# @package _global_

# Local test configuration - quick dry run
defaults:
  - base_finetune

experiment:
  name: local_test

scratch:
  resolution: 256                   # Much smaller for quick testing
  train_batch_size: 1               # Minimal batch size
  num_train_workers: 2              # Fewer workers for local
  num_frames: 1
  max_num_objects: 2                # Fewer objects for speed
  base_lr: 2.0e-05
  vision_lr: 2.0e-06
  phases_per_epoch: 1
  num_epochs: 2                     # Just 2 epochs for testing

vos:
  train_transforms:
    - _target_: training.dataset.transforms.ComposeAPI
      transforms:
        - _target_: training.dataset.transforms.RandomHorizontalFlip
          consistent_transform: true
        - _target_: training.dataset.transforms.RandomVerticalFlip
          consistent_transform: true
        - _target_: training.dataset.transforms.RandomAffine
          degrees: 90
          consistent_transform: true
          scale: [0.9, 1.1]
          translate: [0.05, 0.05]
        - _target_: training.dataset.transforms.RandomResizeAPI
          sizes: ${scratch.resolution}
          square: true
          consistent_transform: true
        - _target_: training.dataset.transforms.ColorJitter
          brightness: 0.3
          contrast: 0.3
          saturation: 0.3
          hue: 0.08
          consistent_transform: true
        - _target_: training.dataset.transforms.ToTensorAPI
        - _target_: training.dataset.transforms.NormalizeAPI
          mean: [0.485, 0.456, 0.406]
          std: [0.229, 0.224, 0.225]

trainer:
  checkpoint:
    save_dir: ${hydra:run.dir}/checkpoints
    save_freq: 1                    # Save every epoch for testing
